

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Calculate Green Function Database &mdash; MCMTpy-test 0.1.0a1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Synthesize the Test Data" href="S2_Syn_Waveform.html" />
    <link rel="prev" title="Tutorial_Detailed" href="../tutorial_detailed.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> MCMTpy-test
          

          
            
            <img src="../_static/logo-small-cut.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1.0a1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installing:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorial_detailed.html">Tutorial_Detailed</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Calculate Green Function Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#station-and-source">Station and Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mpi">MPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#path">Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sourcemodel">SourceModel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#seismodel">SeisModel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#config">Config</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logging-file">Logging file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="S2_Syn_Waveform.html">Synthesize the Test Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="S3_Process_Data.html">Prepare Data for MCMTpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="S4_Inv_DC.html">Inversion of  Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="S5_Plot_Result.html">Result Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="S6_Conver_FM.html">Conversion of Source Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="S7_Plot_Beachball.html">Plot Beachball with Station Projected</a></li>
<li class="toctree-l2"><a class="reference internal" href="S8_Decompose_MT.html">Moment Tensor Decompose</a></li>
<li class="toctree-l2"><a class="reference internal" href="S9_Plot_Hudson.html">Huston Plot</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">References:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MCMTpy-test</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../tutorial_detailed.html">Tutorial_Detailed</a> &raquo;</li>
        
      <li>Calculate Green Function Database</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/tutorials/S1_Build_GFs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="calculate-green-function-database">
<h1>Calculate Green Function Database<a class="headerlink" href="#calculate-green-function-database" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#station-and-source" id="id1">Station and Source</a></p></li>
<li><p><a class="reference internal" href="#mpi" id="id2">MPI</a></p></li>
<li><p><a class="reference internal" href="#path" id="id3">Path</a></p></li>
<li><p><a class="reference internal" href="#sourcemodel" id="id4">SourceModel</a></p></li>
<li><p><a class="reference internal" href="#seismodel" id="id5">SeisModel</a></p></li>
<li><p><a class="reference internal" href="#config" id="id6">Config</a></p></li>
<li><p><a class="reference internal" href="#logging-file" id="id7">Logging file</a></p></li>
<li><p><a class="reference internal" href="#example" id="id8">Example</a></p></li>
</ul>
</div>
<ul class="simple">
<li><p>The first step of <strong>MCMTpy</strong> is to build Green’s function database. All parameters are written into a JSON
file named <strong>build_GFs.json</strong>. Some brief descriptions of the parameters are included here following the
definination.</p></li>
<li><p>We do not recommend using relative paths because of the possibility of errors. <strong>Absolute paths</strong> are preferred.</p></li>
<li><p>We used <code class="docutils literal notranslate"><span class="pre">ASDF</span></code> seismic data format to manage Green Function database, which is convenient to locally build up
a database of pre-processed waveforms. ASDF file greatly reduces the number of green functions files,
and a single ASDF file can replace thousands of green function files which may threw us into confusion
in the management process. We store the Green‘s functions corresponding to <strong>Event_ID</strong> (<strong>QuakeML</strong>)
in <strong>“Waveforms”</strong> of ASDF data. In the <strong>“Labels”</strong> of <strong>“Waveforms”</strong> , we store the phase (P and S) travel times
which can be computed in advance by a given velocity model.</p></li>
<li><p>The general structure of MCMTpy stores Green‘s function with ASDF file format shown in the image below.</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/Green_Function_Database.png"><img alt="../_images/Green_Function_Database.png" class="align-center" src="../_images/Green_Function_Database.png" style="width: 100%;" /></a>
<ul class="simple">
<li><p>You can also find some useful information about parameters in refers to <a class="reference external" href="https://github.com/ziyixi/pyfk">pyfk</a>.</p></li>
</ul>
<div class="section" id="station-and-source">
<h2><a class="toc-backref" href="#id1">Station and Source</a><a class="headerlink" href="#station-and-source" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Database_mode</span></code></p>
<ul>
<li><p>Set to be <strong>.true.</strong> when you want to compute the Green’s function library for some region. For real
examples, the GF databases may require up to several GBs of free disc space.
In addition you need to set the following parameters correctly:</p>
<p><code class="docutils literal notranslate"><span class="pre">Source_depth_min</span></code>,
<code class="docutils literal notranslate"><span class="pre">Source_depth_max</span></code>,
<code class="docutils literal notranslate"><span class="pre">Source_depth_spacing</span></code>,
<code class="docutils literal notranslate"><span class="pre">Station_distance_radius_min</span></code>,
<code class="docutils literal notranslate"><span class="pre">Station_distance_radius_max</span></code>,
<code class="docutils literal notranslate"><span class="pre">Station_distance_spacing</span></code>,
<code class="docutils literal notranslate"><span class="pre">Source_name</span></code>,
<code class="docutils literal notranslate"><span class="pre">Network_name</span></code>,
<code class="docutils literal notranslate"><span class="pre">Station_name</span></code>,
<code class="docutils literal notranslate"><span class="pre">Station_depth_reference</span></code></p>
</li>
<li><p>Set to be <strong>.false.</strong> when you want to calculate the Green’s function for stations at which the source is given.
You must provide an <code class="docutils literal notranslate"><span class="pre">.txt</span></code> file named Source_Station_info.txt, which including the longitude latitude and depth
information of the source and station. Different sources should be separated by blank lines.</p></li>
<li><p>Source_Station_info.txt format.</p>
<p>[source_name] [source_lat]    [source_lon]    [source_depth]</p>
<p>[network_name]        [station_name]  [station_lat]   [source_lon]    [station_depth]</p>
</li>
</ul>
<div class="highlight-none notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span>source_1  25.58 99.86  1
YN EYA 26.108 99.947 0
YN YUL 25.885 99.371 0

source_2  25.58 99.86  2
YN EYA 26.108 99.947 0
YN YUL 25.885 99.371 0
XG CFT 25.848 100.517 0
YN BAS 25.118 99.146 0

source_3  25.58 99.86  3
YN WES 23.372 104.253 0
YN MLP 23.128 104.702 0
YN FUN 23.624 105.620 0
</pre></div>
</td></tr></table></div>
<p><code class="docutils literal notranslate"><span class="pre">Source_depth_min</span></code></p>
<ul class="simple">
<li><p>The minimum source depth in Green’s function databases (km).</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Source_depth_max</span></code></p>
<ul class="simple">
<li><p>The maximum source depth in Green’s function databases (km).</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Source_depth_spacing</span></code></p>
<ul class="simple">
<li><p>Interval of source depths in Green’s function databases (km).</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Station_distance_radius_min</span></code></p>
<ul class="simple">
<li><p>The minimum distance of the station in Green’s function databases (km or degree, depend by <code class="docutils literal notranslate"><span class="pre">degrees</span></code>).</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Station_distance_radius_max</span></code></p>
<ul class="simple">
<li><p>The maximum distance of the station in Green’s function databases (km or degree, depend by <code class="docutils literal notranslate"><span class="pre">degrees</span></code>).</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Station_distance_spacing</span></code></p>
<ul class="simple">
<li><p>Horizontal spacing interval in Green’s function databases (km or degree, depend by <code class="docutils literal notranslate"><span class="pre">degrees</span></code>).</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Source_name</span></code></p>
<ul class="simple">
<li><p>Source name in Green’s function databases, default value is <em>source</em>, please do not change.
Only lowercase letters are supported.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Network_name</span></code></p>
<ul class="simple">
<li><p>Network name in Green’s function databases, default value is <em>NET</em>, please do not change.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Station_name</span></code></p>
<ul class="simple">
<li><p>Station name in Green’s function databases, default value is <em>STA</em>, please do not change.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Station_depth_reference</span></code></p>
<ul class="simple">
<li><p>Depth of all virtual stations (km).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When <code class="docutils literal notranslate"><span class="pre">Database_mode</span></code> = <strong>.false.</strong>, depths can vary from station to station. But when set to be <strong>.true</strong>,
all stations must use the same depth <code class="docutils literal notranslate"><span class="pre">Station_depth_reference</span></code>.</p>
</div>
</div>
<div class="section" id="mpi">
<h2><a class="toc-backref" href="#id2">MPI</a><a class="headerlink" href="#mpi" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">MPI_n</span></code></p>
<ul class="simple">
<li><p>CPU number. When <code class="docutils literal notranslate"><span class="pre">Database_mode</span></code> = <strong>.false.</strong>, the number of call cores should be less than or equal to the number of source.
But when set to be <strong>.true</strong>, there are no limits.</p></li>
</ul>
</div>
<div class="section" id="path">
<h2><a class="toc-backref" href="#id3">Path</a><a class="headerlink" href="#path" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">DATADIR</span></code></p>
<ul class="simple">
<li><p>The output path of the Green function databases.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">DATADIR_splits</span></code></p>
<ul class="simple">
<li><p>A subfolder under <code class="docutils literal notranslate"><span class="pre">DATADIR</span></code> for Green’s function. Please keep the path relative to <code class="docutils literal notranslate"><span class="pre">DATADIR</span></code>.</p></li>
</ul>
</div>
<div class="section" id="sourcemodel">
<h2><a class="toc-backref" href="#id4">SourceModel</a><a class="headerlink" href="#sourcemodel" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">source_mechanism</span></code></p>
<ul class="simple">
<li><p>Focal mechanism, not used. Please set it to <strong>.null.</strong>.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">srcType</span></code></p>
<ul class="simple">
<li><p>The type of Green’s function, dc(double-couple) sf(single-couple) ep(explosion). Please set it to <strong>.dc.</strong>.</p></li>
</ul>
</div>
<div class="section" id="seismodel">
<h2><a class="toc-backref" href="#id5">SeisModel</a><a class="headerlink" href="#seismodel" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Velocity_model</span></code></p>
<ul>
<li><p>Path to the velocity model file. And the format:</p>
<p>thick(km), vs(km/s), vp(km/s), density(g/cm^3), Qs, Qp</p>
</li>
</ul>
<div class="highlight-none notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span>5.01000000   3.17601610   5.41925121   2.50000000   600.00000000   1200.00000000   
5.01000000   3.36477536   5.67947907   2.55000000   600.00000000   1200.00000000   
5.01000000   3.52147424   5.93255556   2.60000000   600.00000000   1200.00000000   
5.01000000   3.55152174   6.00984300   2.65000000   600.00000000   1200.00000000   
5.01000000   3.54084541   6.02592110   2.70000000   600.00000000   1250.00000000   
5.01000000   3.58840419   6.14793478   2.75000000   650.00000000   1300.00000000   
5.01000000   3.75369968   6.48572061   2.80000000   700.00000000   1350.00000000   
5.01000000   3.94361514   6.86566667   2.90000000   750.00000000   1400.00000000   
10.01000000   4.12710548   7.20229388   3.00000000   800.00000000   1500.00000000   
10.01000000   4.30825765   7.55049678   3.10000000   850.00000000   1600.00000000   
10.01000000   4.38069968   7.72566425   3.20000000   850.00000000   1700.00000000   
90.00000000   4.50000000   7.80000000   3.27000000   900.00000000   1800.00000000   
</pre></div>
</td></tr></table></div>
<p><code class="docutils literal notranslate"><span class="pre">flattening</span></code></p>
<ul class="simple">
<li><p>Set the flatten status of the velocity model, <strong>.true.</strong> or <strong>.false.</strong>.</p></li>
</ul>
</div>
<div class="section" id="config">
<h2><a class="toc-backref" href="#id6">Config</a><a class="headerlink" href="#config" title="Permalink to this headline">¶</a></h2>
<p>The following parameters explanation refers to <code class="docutils literal notranslate"><span class="pre">pyfk</span></code> &lt;<a class="reference external" href="https://github.com/ziyixi/pyfk">https://github.com/ziyixi/pyfk</a>&gt;.</p>
<p><code class="docutils literal notranslate"><span class="pre">npt</span></code></p>
<ul class="simple">
<li><p>The sampling points is a multiple of 2.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">dt</span></code></p>
<ul class="simple">
<li><p>Sampling interval in seconds</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">degrees</span></code></p>
<ul class="simple">
<li><p>Use degrees instead of km, defaults to <strong>.true.</strong>. Only when <code class="docutils literal notranslate"><span class="pre">Database_mode</span></code> = <strong>.true.</strong>, it can be changed to <strong>.false.</strong></p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">taper</span></code></p>
<ul class="simple">
<li><p>Taper applies a low-pass cosine filter at fc=(1-taper)*f_Niquest, defaults to 0.3.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">filter</span></code></p>
<ul class="simple">
<li><p>Apply a high-pass filter with a cosine transition zone between freq. f1 and f2 in Hz, defaults to (0, 0).</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">dk</span></code></p>
<ul class="simple">
<li><p>The non-dimensional sampling interval of wavenumber, defaults to 0.3.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">smth</span></code></p>
<ul class="simple">
<li><p>Makes the final sampling interval to be dt/smth, defaults to 1.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">pmin</span></code></p>
<ul class="simple">
<li><p>The min slownesses in term of 1/vs_at_the_source, defaults to 0.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">pmax</span></code></p>
<ul class="simple">
<li><p>The max slownesses in term of 1/vs_at_the_source, defaults to 1.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">kmax</span></code></p>
<ul class="simple">
<li><p>The kmax at zero frequency in term of 1/hs, defaults to 15.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">rdep</span></code></p>
<ul class="simple">
<li><p>Not used now. Please keep the default values of the parameters, defaults to 0 in km.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">updn</span></code></p>
<ul class="simple">
<li><p>The “up” for up-going wave only, “down” for down-going wave only, “all” for both “up” and “down”, defaults to “all”.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">samples_before_first_arrival</span></code></p>
<ul class="simple">
<li><p>The number of points before the first arrival, defaults to 50.</p></li>
</ul>
</div>
<div class="section" id="logging-file">
<h2><a class="toc-backref" href="#id7">Logging file</a><a class="headerlink" href="#logging-file" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>MCMTpy</strong> will generates 2 logging files when it builds GFs datebase, that is <strong>prepro_para_info.txt</strong> and
<strong>write_Source_Station_info_MPI</strong>. They record all the parameter information of GFs datebase. You can find them
in <code class="docutils literal notranslate"><span class="pre">DATADIR</span></code> path.</p></li>
</ul>
</div>
<div class="section" id="example">
<h2><a class="toc-backref" href="#id8">Example</a><a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The <strong>example_path</strong> need to de changed to your path, and run this notebook to set <strong>build_GFs.json</strong> file.</p></li>
</ul>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">json5</span>


<span class="c1"># The root directory of the project</span>
<span class="n">example_path</span> <span class="o">=</span> <span class="s1">&#39;/Users/yf/3.Project/8.MCMTpy/MCMTpy-master/data/example_yunnan&#39;</span>


<span class="c1">#------------------------------------------------------------#</span>
<span class="c1"># we expect no parameters need to be changed below</span>
<span class="c1">#------------------------------------------------------------#</span>
<span class="c1"># 1. get notebook path</span>
<span class="n">notebook_path</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">notebook_path</span><span class="p">)</span>

<span class="c1"># 2. change path to Green_Funcs</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">&#39;../Green_Funcs&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">())</span>

<span class="c1"># 3. show build_GFs.json </span>
<span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;build_GFs.json&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f1</span><span class="p">:</span>
    <span class="n">gfs_json</span><span class="o">=</span><span class="n">json5</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span>
<span class="n">f1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># 4. change parameters with absolute path</span>
<span class="n">gfs_json</span><span class="p">[</span><span class="s1">&#39;Source_Station_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">example_path</span><span class="p">,</span><span class="s2">&quot;Green_Funcs/Source_Station_info.txt&quot;</span><span class="p">)</span>
<span class="n">gfs_json</span><span class="p">[</span><span class="s2">&quot;DATADIR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">example_path</span><span class="p">,</span><span class="s2">&quot;Green_Funcs/GFs1&quot;</span><span class="p">)</span>
<span class="n">gfs_json</span><span class="p">[</span><span class="s2">&quot;DATADIR_splits&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">example_path</span><span class="p">,</span><span class="s2">&quot;Green_Funcs1/GFs1/GFs_splits&quot;</span><span class="p">)</span>
<span class="n">gfs_json</span><span class="p">[</span><span class="s2">&quot;Velocity_model&quot;</span><span class="p">]</span> <span class="o">=</span>  <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">example_path</span><span class="p">,</span><span class="s2">&quot;v_model/v_model_yunnan.txt&quot;</span><span class="p">)</span>        
<span class="n">gfs_json_new</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">example_path</span><span class="p">,</span><span class="s1">&#39;Green_Funcs/build_GFs_new.json&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">gfs_json_new</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f2</span><span class="p">:</span>
    <span class="n">json5</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">gfs_json</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">f2</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># !mpirun -n 4 MCMTpy build_GFs pyfk -c build_GFs_new.json  &gt; gfs.log</span>
</pre></div>
</td></tr></table></div>
<ul>
<li><p>Now you can run MCMTpy in bash:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mpirun -n 4 MCMTpy build_GFs pyfk -c build_GFs_new.json  &gt; gfs.log
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please follow the above parameter instructions and set all parameters correctly before running the program.
Otherwise, it is easy to report an error!</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="S2_Syn_Waveform.html" class="btn btn-neutral float-right" title="Synthesize the Test Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../tutorial_detailed.html" class="btn btn-neutral float-left" title="Tutorial_Detailed" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Fu Yin.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>